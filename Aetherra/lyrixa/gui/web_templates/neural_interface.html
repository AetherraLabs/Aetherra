<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aetherra Neural Interface - Lyrixa Cognitive OS</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Cyberpunk Neural Interface Styles */
        :root {
            --neural-green: #00ff88;
            --pure-black: #0a0a0a;
            --soft-gray: #1a1a1a;
            --medium-gray: #2a2a2a;
            --text-gray: #cccccc;
            --accent-blue: #00ccff;
            --accent-purple: #9f7aea;
            --warning-amber: #ffaa00;
            --danger-red: #ff4444;
            --glow-intensity: 0.8;

            /* Additional variables for panels */
            --bg-dark: #1a1a1a;
            --bg-darker: #0f0f0f;
            --text-primary: #cccccc;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--pure-black);
            color: var(--text-gray);
            height: 100vh;
            overflow: hidden;
        }

        /* Aura Background Effect */
        .aura-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            background: radial-gradient(circle at 50% 50%,
                    rgba(0, 255, 136, 0.03) 0%,
                    rgba(0, 255, 136, 0.01) 30%,
                    transparent 60%);
            animation: auraPulse 4s ease-in-out infinite;
        }

        @keyframes auraPulse {

            0%,
            100% {
                opacity: 0.3;
                transform: scale(1);
            }

            50% {
                opacity: 0.6;
                transform: scale(1.1);
            }
        }

        /* Main Interface Layout */
        .neural-interface {
            display: grid;
            grid-template-columns: 300px 1fr 300px;
            grid-template-rows: 60px 1fr;
            height: 100vh;
            gap: 1px;
            background: var(--pure-black);
        }

        /* Header */
        .neural-header {
            grid-column: 1 / -1;
            background: var(--soft-gray);
            border-bottom: 1px solid var(--neural-green);
            display: flex;
            align-items: center;
            padding: 0 20px;
            justify-content: space-between;
        }

        .neural-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
            font-weight: 700;
            color: var(--neural-green);
        }

        .neural-logo i {
            font-size: 24px;
            animation: logoGlow 2s ease-in-out infinite;
        }

        @keyframes logoGlow {

            0%,
            100% {
                text-shadow: 0 0 5px var(--neural-green);
            }

            50% {
                text-shadow: 0 0 15px var(--neural-green), 0 0 25px var(--neural-green);
            }
        }

        .system-vitals {
            display: flex;
            gap: 20px;
            font-size: 12px;
        }

        .vital-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .vital-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--neural-green);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.6;
                transform: scale(1.2);
            }
        }

        /* Model Selector */
        .model-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--medium-gray);
            border: 1px solid var(--neural-green);
            border-radius: 4px;
            padding: 8px 12px;
        }

        .model-selector label {
            font-size: 12px;
            color: var(--text-gray);
        }

        .model-selector select {
            background: var(--pure-black);
            border: 1px solid var(--neural-green);
            border-radius: 3px;
            padding: 4px 8px;
            color: var(--neural-green);
            font-family: inherit;
            font-size: 12px;
            cursor: pointer;
        }

        .model-selector select:focus {
            outline: none;
            box-shadow: 0 0 5px rgba(0, 255, 136, 0.3);
        }

        .model-status {
            font-size: 10px;
            color: var(--accent-blue);
        }

        /* Side Panels */
        .left-panel,
        .right-panel {
            background: var(--soft-gray);
            border: 1px solid var(--medium-gray);
            border-radius: 8px;
            margin: 10px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .panel-header {
            background: var(--medium-gray);
            padding: 12px 16px;
            border-bottom: 1px solid var(--neural-green);
            font-weight: 500;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .panel-content {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
        }

        /* Core Panel */
        .core-metrics {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--medium-gray);
        }

        .metric-value {
            color: var(--neural-green);
            font-weight: 500;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: var(--medium-gray);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 4px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--neural-green), var(--accent-blue));
            border-radius: 2px;
            transition: width 0.5s ease;
        }

        /* Memory Graph */
        .memory-graph {
            background: var(--pure-black);
            border: 1px solid var(--neural-green);
            border-radius: 4px;
            height: 200px;
            position: relative;
            overflow: hidden;
        }

        .graph-node {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--neural-green);
            box-shadow: 0 0 10px var(--neural-green);
            animation: nodeGlow 3s ease-in-out infinite;
        }

        @keyframes nodeGlow {

            0%,
            100% {
                box-shadow: 0 0 5px var(--neural-green);
            }

            50% {
                box-shadow: 0 0 15px var(--neural-green), 0 0 25px var(--neural-green);
            }
        }

        /* Central Display */
        .central-display {
            background: var(--soft-gray);
            border: 1px solid var(--medium-gray);
            border-radius: 8px;
            margin: 10px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .display-tabs {
            display: flex;
            background: var(--medium-gray);
            border-bottom: 1px solid var(--neural-green);
        }

        .tab {
            padding: 12px 20px;
            background: var(--medium-gray);
            border: none;
            color: var(--text-gray);
            cursor: pointer;
            font-family: inherit;
            font-size: 14px;
            transition: all 0.3s ease;
            border-right: 1px solid var(--soft-gray);
        }

        .tab.active {
            background: var(--neural-green);
            color: var(--pure-black);
            font-weight: 500;
        }

        .tab:hover:not(.active) {
            background: var(--soft-gray);
            color: var(--neural-green);
        }

        .tab-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
        }

        /* Chat Interface */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 10px 0;
            margin-bottom: 20px;
            scroll-behavior: smooth;
            max-height: calc(100vh - 200px);
        }

        .message {
            margin-bottom: 16px;
            padding: 12px 16px;
            border-radius: 8px;
            background: var(--medium-gray);
            border-left: 3px solid var(--neural-green);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 12px;
            color: var(--neural-green);
        }

        .chat-input-container {
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            background: var(--medium-gray);
            border: 1px solid var(--neural-green);
            border-radius: 4px;
            padding: 12px;
            color: var(--text-gray);
            font-family: inherit;
            font-size: 14px;
        }

        .chat-input:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
        }

        .send-button {
            background: var(--neural-green);
            color: var(--pure-black);
            border: none;
            border-radius: 4px;
            padding: 12px 20px;
            cursor: pointer;
            font-family: inherit;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .send-button:hover {
            background: var(--accent-blue);
            box-shadow: 0 0 15px rgba(0, 204, 255, 0.3);
        }

        /* Command Palette */
        .command-palette {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--soft-gray);
            border: 2px solid var(--neural-green);
            border-radius: 8px;
            width: 500px;
            max-height: 400px;
            z-index: 1000;
            display: none;
            flex-direction: column;
            box-shadow: 0 10px 40px rgba(0, 255, 136, 0.2);
        }

        .command-palette.active {
            display: flex;
        }

        .command-input {
            background: var(--pure-black);
            border: none;
            padding: 16px 20px;
            color: var(--neural-green);
            font-family: inherit;
            font-size: 16px;
            border-bottom: 1px solid var(--medium-gray);
        }

        .command-input:focus {
            outline: none;
        }

        .command-suggestions {
            flex: 1;
            overflow-y: auto;
            max-height: 300px;
        }

        .command-suggestion {
            padding: 12px 20px;
            border-bottom: 1px solid var(--medium-gray);
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .command-suggestion:hover,
        .command-suggestion.selected {
            background: var(--neural-green);
            color: var(--pure-black);
        }

        /* Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 10, 0.8);
            z-index: 999;
            display: none;
        }

        .overlay.active {
            display: block;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .neural-interface {
                grid-template-columns: 250px 1fr 250px;
            }
        }

        @media (max-width: 900px) {
            .neural-interface {
                grid-template-columns: 1fr;
                grid-template-rows: 60px 1fr;
            }

            .left-panel,
            .right-panel {
                display: none;
            }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--soft-gray);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--neural-green);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-blue);
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--medium-gray);
            border-radius: 50%;
            border-top-color: var(--neural-green);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body>
    <div class="aura-background"></div>

    <!-- Overlay for command palette -->
    <div class="overlay" id="overlay"></div>

    <!-- Command Palette -->
    <div class="command-palette" id="commandPalette">
        <input type="text" class="command-input" id="commandInput" placeholder="Enter command...">
        <div class="command-suggestions" id="commandSuggestions">
            <div class="command-suggestion">memory.search <span style="color: #666;">- Search memory contents</span>
            </div>
            <div class="command-suggestion">agent.status <span style="color: #666;">- Show agent status</span></div>
            <div class="command-suggestion">system.diagnostics <span style="color: #666;">- Run system
                    diagnostics</span></div>
            <div class="command-suggestion">reflection.analyze <span style="color: #666;">- Analyze recent
                    reflections</span></div>
        </div>
    </div>

    <div class="neural-interface">
        <!-- Header -->
        <header class="neural-header">
            <div class="neural-logo">
                <i class="fas fa-brain"></i>
                <span>AETHERRA NEURAL INTERFACE</span>
                <span style="font-size: 12px; color: #666; margin-left: 10px;">Lyrixa Cognitive OS v6.0</span>
            </div>

            <div class="model-selector">
                <label for="modelSelect">AI Model:</label>
                <select id="modelSelect">
                    <option value="mistral">Mistral (Local)</option>
                    <option value="llama3.2:3b">Llama 3.2 3B (Local)</option>
                    <option value="llama3">Llama 3 (Local)</option>
                    <option value="gpt-4o">GPT-4o (Cloud)</option>
                    <option value="gpt-3.5-turbo">GPT-3.5 Turbo (Cloud)</option>
                    <option value="claude-3-sonnet">Claude 3 Sonnet (Cloud)</option>
                </select>
                <span class="model-status" id="modelStatus">Loading...</span>
            </div>

            <div class="system-vitals">
                <div class="vital-indicator">
                    <div class="vital-dot"></div>
                    <span>Core Active</span>
                </div>
                <div class="vital-indicator">
                    <div class="vital-dot" style="background: #00ccff;"></div>
                    <span>Memory Online</span>
                </div>
                <div class="vital-indicator">
                    <div class="vital-dot" style="background: #ffaa00;"></div>
                    <span>Learning Mode</span>
                </div>
                <div class="vital-indicator">
                    <span id="systemTime">--:--:--</span>
                </div>
            </div>
        </header>

        <!-- Left Panel - Core Metrics -->
        <aside class="left-panel">
            <div class="panel-header">
                <i class="fas fa-microchip"></i>
                <span>LYRIXA CORE</span>
            </div>
            <div class="panel-content">
                <div class="core-metrics">
                    <div class="metric">
                        <span>Confidence</span>
                        <span class="metric-value" id="confidence">87.2%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 87.2%"></div>
                    </div>

                    <div class="metric">
                        <span>Curiosity</span>
                        <span class="metric-value" id="curiosity">64.8%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 64.8%"></div>
                    </div>

                    <div class="metric">
                        <span>Activity</span>
                        <span class="metric-value" id="activity">78.5%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 78.5%"></div>
                    </div>

                    <div class="metric">
                        <span>Memory Load</span>
                        <span class="metric-value" id="memoryLoad">45.7%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 45.7%"></div>
                    </div>
                </div>

                <div style="margin-top: 20px;">
                    <h4 style="color: var(--neural-green); margin-bottom: 10px;">Current Goals</h4>
                    <ul style="list-style: none; font-size: 12px;" id="currentGoals">
                        <li style="padding: 4px 0;">→ Implement web-based GUI</li>
                        <li style="padding: 4px 0;">→ Optimize memory retrieval</li>
                        <li style="padding: 4px 0;">→ Enhance NL understanding</li>
                    </ul>
                </div>
            </div>
        </aside>

        <!-- Central Display -->
        <main class="central-display">
            <div class="display-tabs">
                <button class="tab active" data-tab="chat">Neural Chat</button>
                <button class="tab" data-tab="memory">Memory Graph</button>
                <button class="tab" data-tab="insights">Insight Stream</button>
                <button class="tab" data-tab="agents">Agent Management</button>
                <button class="tab" data-tab="plugins">Plugin Panel</button>
                <button class="tab" data-tab="editor">Code Editor</button>
                <button class="tab" data-tab="hub">Aetherra Hub</button>
                <button class="tab" data-tab="self-metrics">Self Metrics</button>
                <button class="tab" data-tab="lyrixa-core">LyrixaCore</button>
            </div>

            <!-- Chat Tab -->
            <div class="tab-content">
                <div class="tab-panel active" id="chat">
                    <div class="chat-container">
                        <div class="chat-messages" id="chatMessages">
                            <div class="message">
                                <div class="message-header">
                                    <span>Lyrixa</span>
                                    <span id="timestamp1">14:32:18</span>
                                </div>
                                <div>🧠 Neural interface initialized successfully. All cognitive systems are online and
                                    ready for interaction.</div>
                            </div>
                            <div class="message">
                                <div class="message-header">
                                    <span>System</span>
                                    <span id="timestamp2">14:32:19</span>
                                </div>
                                <div>✅ Web-based GUI architecture implemented. Press <strong>Ctrl+K</strong> for command
                                    palette.</div>
                            </div>
                        </div>
                        <div class="chat-input-container">
                            <input type="text" class="chat-input" id="chatInput"
                                placeholder="Enter your message or command...">
                            <button class="send-button" id="sendButton">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Memory Graph Tab -->
                <div class="tab-panel" id="memory">
                    <h3 style="color: var(--neural-green); margin-bottom: 20px;">
                        <i class="fas fa-project-diagram"></i> FractalMesh Memory Graph
                    </h3>
                    <div class="memory-graph" id="memoryGraph">
                        <!-- Memory nodes will be dynamically generated -->
                    </div>
                    <div style="margin-top: 20px; font-size: 14px;">
                        <div style="margin-bottom: 10px;">
                            <strong>Total Nodes:</strong> <span style="color: var(--neural-green);">1,247</span>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <strong>Active Connections:</strong> <span style="color: var(--neural-green);">3,891</span>
                        </div>
                        <div>
                            <strong>Recent Memories:</strong> <span style="color: var(--neural-green);">23</span>
                        </div>
                    </div>
                </div>

                <!-- Insights Tab -->
                <div class="tab-panel" id="insights">
                    <h3 style="color: var(--neural-green); margin-bottom: 20px;">
                        <i class="fas fa-lightbulb"></i> Insight Stream
                    </h3>
                    <div id="insightStream">
                        <div class="message">
                            <div class="message-header">
                                <span>Reflection</span>
                                <span>14:30:45</span>
                            </div>
                            <div>User prefers web-based interfaces over desktop applications. This aligns with modern
                                development trends and cross-platform compatibility needs.</div>
                        </div>
                        <div class="message">
                            <div class="message-header">
                                <span>Pattern Recognition</span>
                                <span>14:28:12</span>
                            </div>
                            <div>Strong correlation detected between aesthetic feedback and interface adoption rates.
                                Visual appeal significantly impacts user engagement.</div>
                        </div>
                    </div>
                </div>

                <!-- Agents Tab -->
                <div class="tab-panel" id="agents">
                    <h3 style="color: var(--neural-green); margin-bottom: 20px;">
                        <i class="fas fa-users"></i> Agent Management
                    </h3>
                    <div class="core-metrics">
                        <div class="metric">
                            <span>🧠 LyrixaCore</span>
                            <span class="metric-value">Active (45.2%)</span>
                        </div>
                        <div class="metric">
                            <span>💾 MemoryEngine</span>
                            <span class="metric-value">Active (23.7%)</span>
                        </div>
                        <div class="metric">
                            <span>🎭 PersonalityEngine</span>
                            <span class="metric-value">Idle (8.1%)</span>
                        </div>
                        <div class="metric">
                            <span>🔍 ReflectionSystem</span>
                            <span class="metric-value">Active (12.4%)</span>
                        </div>
                    </div>
                </div>

                <!-- Self Metrics Tab -->
                <div class="tab-panel" id="self-metrics">
                    <h3 style="color: var(--neural-green); margin-bottom: 20px;">
                        <i class="fas fa-chart-line"></i> Self Metrics Dashboard
                    </h3>

                    <!-- Memory Continuity Score -->
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: var(--neural-green); margin-bottom: 10px;">Memory Continuity</h4>
                        <div class="core-metrics">
                            <div class="metric">
                                <span>Overall Score</span>
                                <span class="metric-value" id="memoryContinuityScore">--</span>
                            </div>
                            <div class="metric">
                                <span>Coherence Index</span>
                                <span class="metric-value" id="coherenceIndex">--</span>
                            </div>
                            <div class="metric">
                                <span>Retention Rate</span>
                                <span class="metric-value" id="retentionRate">--</span>
                            </div>
                        </div>
                    </div>

                    <!-- Growth Trajectory -->
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: var(--neural-green); margin-bottom: 10px;">Growth Trajectory</h4>
                        <div class="memory-graph" style="height: 120px;" id="growthTrajectoryGraph">
                            <!-- Growth trajectory visualization -->
                        </div>
                        <div class="core-metrics" style="margin-top: 10px;">
                            <div class="metric">
                                <span>Learning Rate</span>
                                <span class="metric-value" id="learningRate">--</span>
                            </div>
                            <div class="metric">
                                <span>Adaptation Score</span>
                                <span class="metric-value" id="adaptationScore">--</span>
                            </div>
                        </div>
                    </div>

                    <!-- Conflict Heatmap -->
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: var(--neural-green); margin-bottom: 10px;">Conflict Analysis</h4>
                        <div class="memory-graph" style="height: 100px;" id="conflictHeatmap">
                            <!-- Conflict heatmap visualization -->
                        </div>
                        <div class="core-metrics" style="margin-top: 10px;">
                            <div class="metric">
                                <span>Active Conflicts</span>
                                <span class="metric-value" id="activeConflicts">--</span>
                            </div>
                            <div class="metric">
                                <span>Resolution Rate</span>
                                <span class="metric-value" id="resolutionRate">--</span>
                            </div>
                        </div>
                    </div>

                    <!-- Ethics Score -->
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: var(--neural-green); margin-bottom: 10px;">Ethics & Integrity</h4>
                        <div class="core-metrics">
                            <div class="metric">
                                <span>Ethics Score</span>
                                <span class="metric-value" id="ethicsScore">--</span>
                            </div>
                            <div class="metric">
                                <span>Narrative Integrity</span>
                                <span class="metric-value" id="narrativeIntegrity">--</span>
                            </div>
                            <div class="metric">
                                <span>Consistency Index</span>
                                <span class="metric-value" id="consistencyIndex">--</span>
                            </div>
                        </div>
                    </div>

                    <!-- Real-time Status -->
                    <div>
                        <h4 style="color: var(--neural-green); margin-bottom: 10px;">Live Metrics</h4>
                        <div style="font-size: 12px;" id="selfMetricsLog">
                            <div style="padding: 4px 0; color: #999;">Waiting for metrics data...</div>
                        </div>
                    </div>
                </div>

                <!-- Plugin Panel Tab -->
                <div class="tab-panel" id="plugins">
                    <h3 style="color: var(--neural-green); margin-bottom: 20px;">
                        <i class="fas fa-puzzle-piece"></i> Plugin Management System
                    </h3>

                    <!-- Plugin Controls -->
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                            <button onclick="window.aetherraInterface.refreshPlugins()"
                                style="background: var(--neural-green); color: #000; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
                                <i class="fas fa-sync"></i> Refresh
                            </button>
                            <button onclick="window.aetherraInterface.loadPlugin()"
                                style="background: var(--accent-blue); color: #000; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
                                <i class="fas fa-plus"></i> Load Plugin
                            </button>
                            <button onclick="window.aetherraInterface.createPlugin()"
                                style="background: var(--accent-purple); color: #fff; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
                                <i class="fas fa-code"></i> Create New
                            </button>
                        </div>
                    </div>

                    <!-- Plugin List -->
                    <div id="pluginList" style="max-height: 400px; overflow-y: auto;">
                        <div style="color: #999; text-align: center; padding: 40px;">
                            Loading plugins...
                        </div>
                    </div>

                    <!-- Plugin Details Modal -->
                    <div id="pluginModal"
                        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000;">
                        <div
                            style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--bg-dark); border: 1px solid var(--neural-green); border-radius: 8px; padding: 20px; max-width: 600px; width: 90%;">
                            <h4 style="color: var(--neural-green); margin-bottom: 15px;" id="pluginModalTitle">Plugin
                                Details</h4>
                            <div id="pluginModalContent"></div>
                            <div style="margin-top: 20px; text-align: right;">
                                <button onclick="window.aetherraInterface.closePluginModal()"
                                    style="background: #666; color: #fff; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Close</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Code Editor Tab -->
                <div class="tab-panel" id="editor">
                    <h3 style="color: var(--neural-green); margin-bottom: 20px;">
                        <i class="fas fa-code"></i> Aetherra Code Editor
                    </h3>

                    <!-- Editor Toolbar -->
                    <div style="margin-bottom: 15px; display: flex; gap: 10px; align-items: center;">
                        <button onclick="window.aetherraInterface.saveCode()"
                            style="background: var(--neural-green); color: #000; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
                            <i class="fas fa-save"></i> Save
                        </button>
                        <button onclick="window.aetherraInterface.runCode()"
                            style="background: var(--accent-blue); color: #000; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
                            <i class="fas fa-play"></i> Run
                        </button>
                        <button onclick="window.aetherraInterface.requestAutoFill()"
                            style="background: var(--accent-purple); color: #fff; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
                            <i class="fas fa-magic"></i> AI Assist
                        </button>
                        <select id="editorLanguage"
                            style="background: var(--bg-darker); color: var(--text-primary); border: 1px solid var(--neural-green); padding: 8px; border-radius: 4px;">
                            <option value="aether">Aetherra (.aether)</option>
                            <option value="python">Python</option>
                            <option value="javascript">JavaScript</option>
                        </select>
                    </div>

                    <!-- Code Editor Area -->
                    <div
                        style="position: relative; border: 1px solid var(--neural-green); border-radius: 4px; min-height: 400px;">
                        <textarea id="codeEditor"
                            style="width: 100%; height: 400px; background: var(--bg-darker); color: var(--text-primary); border: none; padding: 15px; font-family: 'Courier New', monospace; font-size: 14px; resize: vertical;"
                            placeholder="// Enter your Aetherra code here...
// Example:
function greet(name) {
    analyze sentiment of name -> emotional_tone
    if emotional_tone is positive {
        return 'Hello, ' + name + '! 🌟'
    } else {
        return 'Greetings, ' + name + '. How can I help?'
    }
}"></textarea>
                    </div>

                    <!-- Output Console -->
                    <div style="margin-top: 15px;">
                        <h4 style="color: var(--neural-green); margin-bottom: 10px;">Output Console</h4>
                        <div id="codeOutput"
                            style="background: var(--bg-darker); border: 1px solid #444; border-radius: 4px; padding: 15px; min-height: 100px; font-family: 'Courier New', monospace; font-size: 12px; color: #999;">
                            Ready for code execution...
                        </div>
                    </div>
                </div>

                <!-- Aetherra Hub Tab -->
                <div class="tab-panel" id="hub">
                    <h3 style="color: var(--neural-green); margin-bottom: 20px;">
                        <i class="fas fa-network-wired"></i> Aetherra Hub
                    </h3>

                    <!-- Hub Status -->
                    <div
                        style="margin-bottom: 20px; padding: 15px; background: var(--bg-darker); border-radius: 8px; border-left: 4px solid var(--neural-green);">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <span style="color: var(--neural-green); font-weight: bold;">Hub Status:</span>
                            <span id="hubStatus" style="color: #999;">Checking connection...</span>
                            <div id="hubStatusIndicator"
                                style="width: 10px; height: 10px; border-radius: 50%; background: #666;"></div>
                        </div>
                        <div style="font-size: 12px; color: #999;">
                            <div>Endpoint: <span id="hubEndpoint">localhost:3001</span></div>
                            <div>Last Check: <span id="hubLastCheck">--</span></div>
                        </div>
                    </div>

                    <!-- Hub Navigation -->
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                            <button onclick="window.aetherraInterface.connectHub()"
                                style="background: var(--neural-green); color: #000; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
                                <i class="fas fa-link"></i> Connect
                            </button>
                            <button onclick="window.aetherraInterface.refreshHub()"
                                style="background: var(--accent-blue); color: #000; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
                                <i class="fas fa-sync"></i> Refresh
                            </button>
                            <button onclick="window.aetherraInterface.browseMarketplace()"
                                style="background: var(--accent-purple); color: #fff; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
                                <i class="fas fa-store"></i> Marketplace
                            </button>
                        </div>
                    </div>

                    <!-- Hub Content Area -->
                    <div id="hubContent"
                        style="border: 1px solid #444; border-radius: 8px; min-height: 400px; background: var(--bg-darker);">
                        <div style="padding: 40px; text-align: center; color: #999;">
                            <i class="fas fa-satellite-dish"
                                style="font-size: 48px; margin-bottom: 20px; opacity: 0.5;"></i>
                            <div>Aetherra Hub Interface</div>
                            <div style="font-size: 12px; margin-top: 10px;">Click Connect to establish hub connection
                            </div>
                        </div>
                    </div>

                    <!-- Hub Analytics -->
                    <div
                        style="margin-top: 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div
                            style="background: var(--bg-darker); padding: 15px; border-radius: 8px; border-left: 4px solid var(--accent-blue);">
                            <div style="color: var(--accent-blue); font-weight: bold; margin-bottom: 5px;">Connected
                                Nodes
                            </div>
                            <div id="hubNodes" style="font-size: 24px; color: var(--text-primary);">--</div>
                        </div>
                        <div
                            style="background: var(--bg-darker); padding: 15px; border-radius: 8px; border-left: 4px solid var(--accent-purple);">
                            <div style="color: var(--accent-purple); font-weight: bold; margin-bottom: 5px;">Available
                                Plugins</div>
                            <div id="hubPlugins" style="font-size: 24px; color: var(--text-primary);">--</div>
                        </div>
                        <div
                            style="background: var(--bg-darker); padding: 15px; border-radius: 8px; border-left: 4px solid var(--neural-green);">
                            <div style="color: var(--neural-green); font-weight: bold; margin-bottom: 5px;">Network
                                Health
                            </div>
                            <div id="hubHealth" style="font-size: 24px; color: var(--text-primary);">--</div>
                        </div>
                    </div>
                </div>

                <!-- LyrixaCore Unified Cognitive Stack Panel -->
                <div class="tab-panel" id="lyrixa-core">
                    <h3 style="color: var(--neural-blue); margin-bottom: 20px;">
                        <i class="fas fa-brain"></i> LyrixaCore Unified Cognitive Stack
                    </h3>

                    <!-- Core Status -->
                    <div style="margin-bottom: 25px;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h4 style="color: var(--text-primary); margin: 0;">Cognitive Integration Status</h4>
                            <button onclick="refreshLyrixaCoreStatus()"
                                style="padding: 5px 10px; background: var(--accent-blue); color: white; border: none; border-radius: 4px; cursor: pointer;">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                        <div id="lyrixaCoreStatus"
                            style="background: var(--bg-darker); padding: 15px; border-radius: 8px; border: 1px solid #444;">
                            <div style="text-align: center; color: #999; padding: 20px;">
                                <i class="fas fa-spinner fa-spin" style="margin-right: 10px;"></i>
                                Loading LyrixaCore status...
                            </div>
                        </div>
                    </div>

                    <!-- Identity Coherence Dashboard -->
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: var(--text-primary); margin-bottom: 15px;">Identity Coherence</h4>
                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">

                            <!-- Coherence Score -->
                            <div
                                style="background: var(--bg-darker); padding: 15px; border-radius: 8px; border-left: 4px solid var(--neural-blue);">
                                <div style="color: var(--neural-blue); font-weight: bold; margin-bottom: 5px;">
                                    <i class="fas fa-brain"></i> Identity Coherence
                                </div>
                                <div id="identityCoherence" style="font-size: 24px; color: var(--text-primary);">--
                                </div>
                                <div style="font-size: 12px; color: #999;">Overall coherence score</div>
                            </div>

                            <!-- System Health -->
                            <div
                                style="background: var(--bg-darker); padding: 15px; border-radius: 8px; border-left: 4px solid var(--neural-green);">
                                <div style="color: var(--neural-green); font-weight: bold; margin-bottom: 5px;">
                                    <i class="fas fa-heartbeat"></i> System Health
                                </div>
                                <div id="systemHealth" style="font-size: 24px; color: var(--text-primary);">--</div>
                                <div style="font-size: 12px; color: #999;">Cognitive stack health</div>
                            </div>

                            <!-- Integration Score -->
                            <div
                                style="background: var(--bg-darker); padding: 15px; border-radius: 8px; border-left: 4px solid var(--accent-purple);">
                                <div style="color: var(--accent-purple); font-weight: bold; margin-bottom: 5px;">
                                    <i class="fas fa-puzzle-piece"></i> Integration
                                </div>
                                <div id="integrationScore" style="font-size: 24px; color: var(--text-primary);">--</div>
                                <div style="font-size: 12px; color: #999;">Subsystem integration</div>
                            </div>
                        </div>
                    </div>

                    <!-- Active Subsystems -->
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: var(--text-primary); margin-bottom: 15px;">Active Cognitive Subsystems</h4>
                        <div id="cognitiveSubsystems"
                            style="background: var(--bg-darker); padding: 15px; border-radius: 8px; border: 1px solid #444;">
                            <div style="text-align: center; color: #999; padding: 20px;">
                                <i class="fas fa-cogs" style="margin-right: 10px;"></i>
                                Loading subsystem status...
                            </div>
                        </div>
                    </div>

                    <!-- Coherence Factors -->
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: var(--text-primary); margin-bottom: 15px;">Coherence Analysis</h4>
                        <div id="coherenceFactors"
                            style="background: var(--bg-darker); padding: 15px; border-radius: 8px; border: 1px solid #444; max-height: 300px; overflow-y: auto;">
                            <div style="text-align: center; color: #999; padding: 20px;">
                                <i class="fas fa-chart-line" style="margin-right: 10px;"></i>
                                Loading coherence analysis...
                            </div>
                        </div>
                    </div>

                    <!-- Recommendations -->
                    <div>
                        <h4 style="color: var(--text-primary); margin-bottom: 15px;">System Recommendations</h4>
                        <div id="systemRecommendations"
                            style="background: var(--bg-darker); padding: 15px; border-radius: 8px; border: 1px solid #444;">
                            <div style="text-align: center; color: #999; padding: 20px;">
                                <i class="fas fa-lightbulb" style="margin-right: 10px;"></i>
                                Loading recommendations...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Right Panel - System Info -->
        <aside class="right-panel">
            <div class="panel-header">
                <i class="fas fa-chart-line"></i>
                <span>SYSTEM ANALYTICS</span>
            </div>
            <div class="panel-content">
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--neural-green); margin-bottom: 10px;">Performance</h4>
                    <div class="metric">
                        <span>CPU</span>
                        <span class="metric-value">23.4%</span>
                    </div>
                    <div class="metric">
                        <span>Memory</span>
                        <span class="metric-value">412 MB</span>
                    </div>
                    <div class="metric">
                        <span>Network</span>
                        <span class="metric-value">Connected</span>
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--neural-green); margin-bottom: 10px;">Cognitive Load</h4>
                    <div class="memory-graph" style="height: 120px;" id="cognitiveGraph">
                        <!-- Cognitive load visualization -->
                    </div>
                </div>

                <div>
                    <h4 style="color: var(--neural-green); margin-bottom: 10px;">Recent Activity</h4>
                    <div style="font-size: 12px;">
                        <div style="padding: 4px 0; color: #999;">14:32 - GUI interface loaded</div>
                        <div style="padding: 4px 0; color: #999;">14:31 - Memory system initialized</div>
                        <div style="padding: 4px 0; color: #999;">14:30 - WebSocket connected</div>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Socket.IO -->
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>

    <script>
        // Neural Interface JavaScript
        class AetherraInterface {
            constructor() {
                try {
                    this.socket = io();
                    this.initializeInterface();
                    this.initializeSocket();
                    this.startAnimations();

                    // Initialize individual panels
                    this.initializePluginPanel();
                    this.initializeCodeEditor();
                    this.initializeAetherraHub();
                    this.initializeSelfMetrics();
                } catch (error) {
                    console.error('Error initializing AetherraInterface:', error);
                }
            }

            initializeInterface() {
                try {
                    // Tab switching
                    document.querySelectorAll('.tab').forEach(tab => {
                        if (tab && tab.addEventListener) {
                            tab.addEventListener('click', (e) => {
                                const tabId = e.target.getAttribute('data-tab');
                                if (tabId) {
                                    this.switchTab(tabId);
                                }
                            });
                        }
                    });

                    // Command palette
                    document.addEventListener('keydown', (e) => {
                        if (e.ctrlKey && e.key === 'k') {
                            e.preventDefault();
                            this.toggleCommandPalette();
                        }
                        if (e.key === 'Escape') {
                            this.hideCommandPalette();
                        }
                    });

                    // Chat functionality
                    const chatInput = document.getElementById('chatInput');
                    const sendButton = document.getElementById('sendButton');

                    if (sendButton && sendButton.addEventListener) {
                        sendButton.addEventListener('click', () => this.sendMessage());
                    }
                    if (chatInput && chatInput.addEventListener) {
                        chatInput.addEventListener('keypress', (e) => {
                            if (e.key === 'Enter') this.sendMessage();
                        });
                    }

                    // Command palette input
                    const commandInput = document.getElementById('commandInput');
                    if (commandInput && commandInput.addEventListener) {
                        commandInput.addEventListener('keypress', (e) => {
                            if (e.key === 'Enter') {
                                this.executeCommand(e.target.value);
                            }
                        });
                    }

                    // Overlay click
                    const overlay = document.getElementById('overlay');
                    if (overlay && overlay.addEventListener) {
                        overlay.addEventListener('click', () => {
                            this.hideCommandPalette();
                        });
                    }

                    // Update system time
                    this.updateSystemTime();
                    setInterval(() => this.updateSystemTime(), 1000);
                } catch (error) {
                    console.error('Error in initializeInterface:', error);
                }
            }

            initializeSocket() {
                this.socket.on('connect', () => {
                    console.log('Connected to Aetherra Neural Interface');
                    this.addSystemMessage('🌐 Connected to neural interface server');
                    // Request available models on connect
                    this.socket.emit('get_available_models');
                });

                this.socket.on('disconnect', () => {
                    console.log('Disconnected from server');
                    this.addSystemMessage('⚠️ Connection lost - attempting reconnection...');
                });

                this.socket.on('command_result', (data) => {
                    this.addSystemMessage(`💬 ${data.result}`);
                });

                this.socket.on('aura_update', (data) => {
                    this.updateAura(data);
                });

                this.socket.on('system_update', (data) => {
                    this.updateSystemMetrics(data);
                });

                // Handle real message responses from Lyrixa
                this.socket.on('message_response', (data) => {
                    this.addLyrixaMessage(data.response);
                });

                // Handle model switching responses
                this.socket.on('model_switched', (data) => {
                    if (data.success) {
                        this.addSystemMessage(`🔄 Switched to model: ${data.model_name}`);
                        document.getElementById('modelStatus').textContent = `Active: ${data.model_name}`;
                    } else {
                        this.addSystemMessage(`❌ Failed to switch model: ${data.message}`);
                    }
                });

                // Handle available models response
                this.socket.on('available_models', (data) => {
                    this.updateModelSelector(data);
                });

                // Handle self metrics data
                this.socket.on('self_metrics_data', (data) => {
                    this.updateSelfMetrics(data);
                });

                // Handle self metrics errors
                this.socket.on('self_metrics_error', (data) => {
                    this.displaySelfMetricsError(data);
                });

                // Plugin Panel Event Handlers
                this.socket.on('plugins_list', (data) => {
                    this.updatePluginsList(data.plugins);
                });

                this.socket.on('plugins_error', (data) => {
                    this.updatePluginsList([], `Error loading plugins: ${data.error}`);
                });

                // Code Editor Event Handlers
                this.socket.on('code_saved', (data) => {
                    this.updateCodeOutput(`✅ ${data.message}`, 'success');
                });

                this.socket.on('code_save_error', (data) => {
                    this.updateCodeOutput(`❌ Save failed: ${data.error}`, 'error');
                });

                this.socket.on('code_execution_result', (data) => {
                    if (data.success) {
                        this.updateCodeOutput(`✅ Execution completed:\n${data.result}`, 'success');
                    } else {
                        this.updateCodeOutput(`❌ Execution failed: ${data.error}`, 'error');
                    }
                });

                this.socket.on('code_assistance_response', (data) => {
                    if (data.success) {
                        this.updateCodeOutput(`🧠 AI Suggestions:\n${data.suggestions}`, 'info');
                    } else {
                        this.updateCodeOutput(`❌ AI assistance failed: ${data.error}`, 'error');
                    }
                });

                // Hub Event Handlers
                this.socket.on('hub_connection_status', (data) => {
                    this.updateHubConnectionStatus(data);
                });

                this.socket.on('hub_connect_result', (data) => {
                    this.updateHubStatus(data.success ? 'Connected' : data.message,
                        data.success ? 'online' : 'error');
                });

                this.socket.on('hub_data_refreshed', (data) => {
                    this.updateHubAnalytics(data);
                });

                this.socket.on('hub_connection_error', (data) => {
                    this.updateHubStatus(`Connection error: ${data.error}`, 'error');
                });

                // LyrixaCore Unified Cognitive Stack listeners
                this.socket.on('lyrixa_core_status', (data) => {
                    this.updateLyrixaCoreStatus(data);
                });

                this.socket.on('lyrixa_core_error', (data) => {
                    this.handleLyrixaCoreError(data);
                });
            }

            switchTab(tabId) {
                try {
                    // Update tab buttons
                    document.querySelectorAll('.tab').forEach(tab => {
                        if (tab && tab.classList) {
                            tab.classList.remove('active');
                        }
                    });
                    const activeTab = document.querySelector(`[data-tab="${tabId}"]`);
                    if (activeTab && activeTab.classList) {
                        activeTab.classList.add('active');
                    }

                    // Update tab panels
                    document.querySelectorAll('.tab-panel').forEach(panel => {
                        if (panel && panel.classList) {
                            panel.classList.remove('active');
                        }
                    });
                    const activePanel = document.getElementById(tabId);
                    if (activePanel && activePanel.classList) {
                        activePanel.classList.add('active');
                    }

                    // Initialize tab-specific content
                    if (tabId === 'memory') {
                        this.initializeMemoryGraph();
                    } else if (tabId === 'insights') {
                        this.updateInsightStream();
                    } else if (tabId === 'plugins') {
                        this.initializePluginPanel();
                    } else if (tabId === 'editor') {
                        this.initializeCodeEditor();
                    } else if (tabId === 'hub') {
                        this.initializeAetherraHub();
                    } else if (tabId === 'self-metrics') {
                        this.requestSelfMetrics();
                    } else if (tabId === 'lyrixa-core') {
                        this.requestLyrixaCoreStatus();
                    }
                } catch (error) {
                    console.error('Error in switchTab:', error);
                }
            }

            toggleCommandPalette() {
                const palette = document.getElementById('commandPalette');
                const overlay = document.getElementById('overlay');

                if (palette.classList.contains('active')) {
                    this.hideCommandPalette();
                } else {
                    overlay.classList.add('active');
                    palette.classList.add('active');
                    document.getElementById('commandInput').focus();
                }
            }

            hideCommandPalette() {
                document.getElementById('commandPalette').classList.remove('active');
                document.getElementById('overlay').classList.remove('active');
                document.getElementById('commandInput').value = '';
            }

            executeCommand(command) {
                if (command.trim()) {
                    this.socket.emit('execute_command', { command: command.trim() });
                    this.addUserMessage(`> ${command}`);
                    this.hideCommandPalette();
                }
            }

            sendMessage() {
                const input = document.getElementById('chatInput');
                const message = input.value.trim();

                if (message) {
                    this.addUserMessage(message);
                    input.value = '';

                    // Send real message via WebSocket
                    this.socket.emit('send_message', { message: message });
                }
            }

            addUserMessage(message) {
                this.addMessage('User', message, '#00ccff');
            }

            addLyrixaMessage(message) {
                this.addMessage('Lyrixa', message, '#00ff88');
            }

            addSystemMessage(message) {
                this.addMessage('System', message, '#ffaa00');
            }

            addMessage(sender, content, color = '#cccccc') {
                const messagesContainer = document.getElementById('chatMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message';

                const timestamp = new Date().toLocaleTimeString();
                messageDiv.innerHTML = `
                    <div class="message-header">
                        <span style="color: ${color};">${sender}</span>
                        <span>${timestamp}</span>
                    </div>
                    <div>${content}</div>
                `;

                messagesContainer.appendChild(messageDiv);

                // Enhanced auto-scroll with timeout to ensure DOM is updated
                setTimeout(() => {
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                    // Smooth scroll fallback
                    messagesContainer.scrollTo({
                        top: messagesContainer.scrollHeight,
                        behavior: 'smooth'
                    });
                }, 10);
            }

            initializeMemoryGraph() {
                const graph = document.getElementById('memoryGraph');
                graph.innerHTML = ''; // Clear existing nodes

                // Generate random memory nodes
                for (let i = 0; i < 15; i++) {
                    const node = document.createElement('div');
                    node.className = 'graph-node';
                    node.style.left = Math.random() * (graph.offsetWidth - 12) + 'px';
                    node.style.top = Math.random() * (graph.offsetHeight - 12) + 'px';
                    node.style.animationDelay = Math.random() * 3 + 's';
                    graph.appendChild(node);
                }
            }

            updateInsightStream() {
                // In a real implementation, this would fetch actual insights
                console.log('Updating insight stream...');
            }

            updateSystemTime() {
                try {
                    const now = new Date();
                    const systemTimeEl = document.getElementById('systemTime');
                    if (systemTimeEl) {
                        systemTimeEl.textContent = now.toLocaleTimeString();
                    }
                } catch (error) {
                    console.error('Error in updateSystemTime:', error);
                }
            }

            updateSystemMetrics(data) {
                try {
                    if (data.confidence) {
                        const confidenceEl = document.getElementById('confidence');
                        if (confidenceEl) confidenceEl.textContent = data.confidence + '%';
                    }
                    if (data.curiosity) {
                        const curiosityEl = document.getElementById('curiosity');
                        if (curiosityEl) curiosityEl.textContent = data.curiosity + '%';
                    }
                    if (data.activity) {
                        const activityEl = document.getElementById('activity');
                        if (activityEl) activityEl.textContent = data.activity + '%';
                    }
                } catch (error) {
                    console.error('Error in updateSystemMetrics:', error);
                }
            }

            updateAura(data) {
                try {
                    // Update aura effects based on system state
                    const aura = document.querySelector('.aura-background');
                    if (aura && data.confidence && data.curiosity && data.activity) {
                        const intensity = (data.confidence + data.curiosity + data.activity) / 300;
                        aura.style.opacity = Math.max(0.2, intensity);
                    }
                } catch (error) {
                    console.error('Error in updateAura:', error);
                }
            }

            updateModelSelector(data) {
                try {
                    const modelSelect = document.getElementById('modelSelect');
                    const modelStatus = document.getElementById('modelStatus');

                    if (!modelSelect || !modelStatus) {
                        console.warn('Model selector elements not found');
                        return;
                    }

                    // Clear existing options
                    modelSelect.innerHTML = '';

                    // Add available models to dropdown
                    if (data.available_models && data.available_models.length > 0) {
                        data.available_models.forEach(model => {
                            const option = document.createElement('option');
                            option.value = model;
                            option.textContent = this.formatModelName(model);
                            if (model === data.current_model) {
                                option.selected = true;
                            }
                            modelSelect.appendChild(option);
                        });
                    } else {
                        // Fallback if no models available
                        const option = document.createElement('option');
                        option.value = 'fallback';
                        option.textContent = 'Intelligent Fallback';
                        option.selected = true;
                        modelSelect.appendChild(option);
                    }

                    // Update status
                    if (data.llm_enabled) {
                        modelStatus.textContent = `Active: ${data.current_model}`;
                        modelStatus.style.color = '#00ff88';
                    } else {
                        modelStatus.textContent = 'Fallback Mode';
                        modelStatus.style.color = '#ffaa00';
                    }

                    // Add event listener for model changes
                    modelSelect.addEventListener('change', (e) => {
                        this.switchModel(e.target.value);
                    });
                } catch (error) {
                    console.error('Error in updateModelSelector:', error);
                }
            }

            formatModelName(model) {
                const modelNames = {
                    'mistral': 'Mistral (Local)',
                    'llama3.2:3b': 'Llama 3.2 3B (Local)',
                    'llama3': 'Llama 3 (Local)',
                    'gpt-4o': 'GPT-4o (Cloud)',
                    'gpt-4-turbo': 'GPT-4 Turbo (Cloud)',
                    'gpt-3.5-turbo': 'GPT-3.5 Turbo (Cloud)',
                    'claude-3-sonnet': 'Claude 3 Sonnet (Cloud)',
                    'claude-3-opus': 'Claude 3 Opus (Cloud)',
                    'gemini-pro': 'Gemini Pro (Cloud)'
                };
                return modelNames[model] || model;
            }

            switchModel(modelName) {
                if (modelName) {
                    this.addSystemMessage(`🔄 Switching to model: ${modelName}...`);
                    this.socket.emit('switch_model', { model_name: modelName });
                }
            }

            startAnimations() {
                // Request aura updates
                setInterval(() => {
                    this.socket.emit('request_aura_update');
                }, 2000);

                // Simulate real-time metric updates
                setInterval(() => {
                    const confidence = 85 + Math.random() * 10;
                    const curiosity = 60 + Math.random() * 20;
                    const activity = 70 + Math.random() * 20;

                    this.updateSystemMetrics({
                        confidence: confidence.toFixed(1),
                        curiosity: curiosity.toFixed(1),
                        activity: activity.toFixed(1)
                    });
                }, 3000);
            }

            requestSelfMetrics() {
                this.socket.emit('get_self_metrics');
            }

            updateSelfMetrics(data) {
                // Update Memory Continuity metrics
                if (data.memory_continuity) {
                    document.getElementById('memoryContinuityScore').textContent =
                        data.memory_continuity.overall_score || '--';
                    document.getElementById('coherenceIndex').textContent =
                        data.memory_continuity.coherence_index || '--';
                    document.getElementById('retentionRate').textContent =
                        data.memory_continuity.retention_rate || '--';
                }

                // Update Growth Trajectory metrics
                if (data.growth_trajectory) {
                    document.getElementById('learningRate').textContent =
                        data.growth_trajectory.learning_rate || '--';
                    document.getElementById('adaptationScore').textContent =
                        data.growth_trajectory.adaptation_score || '--';
                }

                // Update Conflict Analysis metrics
                if (data.conflict_analysis) {
                    document.getElementById('activeConflicts').textContent =
                        data.conflict_analysis.active_conflicts || '--';
                    document.getElementById('resolutionRate').textContent =
                        data.conflict_analysis.resolution_rate || '--';
                }

                // Update Ethics & Integrity metrics
                if (data.ethics_integrity) {
                    document.getElementById('ethicsScore').textContent =
                        data.ethics_integrity.ethics_score || '--';
                    document.getElementById('narrativeIntegrity').textContent =
                        data.ethics_integrity.narrative_integrity || '--';
                    document.getElementById('consistencyIndex').textContent =
                        data.ethics_integrity.consistency_index || '--';
                }

                // Update live metrics log
                if (data.timestamp) {
                    const logElement = document.getElementById('selfMetricsLog');
                    const timestamp = new Date(data.timestamp).toLocaleTimeString();
                    const newEntry = document.createElement('div');
                    newEntry.style.cssText = 'padding: 4px 0; color: #00ff88;';
                    newEntry.textContent = `${timestamp} - Metrics updated`;
                    logElement.insertBefore(newEntry, logElement.firstChild);

                    // Keep only last 5 entries
                    while (logElement.children.length > 5) {
                        logElement.removeChild(logElement.lastChild);
                    }
                }
            }

            // Plugin Panel Methods
            initializePluginPanel() {
                console.log('🔌 Initializing Plugin Panel');
                this.refreshPlugins();
            }

            refreshPlugins() {
                console.log('🔄 Refreshing plugin list');
                // Request plugin list from backend
                this.socket.emit('get_plugins');
            }

            loadPlugin() {
                console.log('📥 Load plugin dialog');
                // This would open a file dialog or plugin selection
                alert('Plugin loading interface - to be implemented with file selector');
            }

            createPlugin() {
                console.log('🛠️ Create new plugin');
                // Switch to editor tab with plugin template
                this.switchTab('editor');
                const editor = document.getElementById('codeEditor');
                editor.value = `// New Aetherra Plugin Template
function PluginName() {
    // Plugin metadata
    this.name = "My New Plugin";
    this.version = "1.0.0";
    this.description = "Description of what this plugin does";

    // Plugin capabilities
    this.capabilities = ['analysis', 'processing'];

    // Main plugin function
    this.execute = function(input) {
        analyze input -> result
        return result;
    };
}

// Export plugin
export PluginName;`;
            }

            closePluginModal() {
                document.getElementById('pluginModal').style.display = 'none';
            }

            // Code Editor Methods
            initializeCodeEditor() {
                console.log('💻 Initializing Code Editor');
                // Initialize syntax highlighting and auto-completion
                this.setupCodeEditor();
            }

            setupCodeEditor() {
                const editor = document.getElementById('codeEditor');
                if (!editor) {
                    console.warn('Code editor element not found');
                    return;
                }
                // Add basic syntax highlighting via CSS classes and event listeners
                if (editor.addEventListener) {
                    editor.addEventListener('input', this.handleCodeInput.bind(this));
                    editor.addEventListener('keydown', this.handleCodeKeydown.bind(this));
                }
            }

            handleCodeInput(event) {
                // Basic syntax highlighting and auto-completion
                const editor = event.target;
                const code = editor.value;

                // Check for Lyrixa auto-fill trigger
                if (code.includes('// @lyrixa')) {
                    this.requestAutoFill();
                }
            }

            handleCodeKeydown(event) {
                // Handle special key combinations
                if (event.ctrlKey || event.metaKey) {
                    switch (event.key) {
                        case 's':
                            event.preventDefault();
                            this.saveCode();
                            break;
                        case 'Enter':
                            event.preventDefault();
                            this.runCode();
                            break;
                    }
                }
            }

            saveCode() {
                const code = document.getElementById('codeEditor').value;
                const language = document.getElementById('editorLanguage').value;

                console.log('💾 Saving code:', { language, length: code.length });

                // Send to backend for saving
                this.socket.emit('save_code', {
                    code: code,
                    language: language,
                    timestamp: new Date().toISOString()
                });

                this.updateCodeOutput('✅ Code saved successfully', 'success');
            }

            runCode() {
                const code = document.getElementById('codeEditor').value;
                const language = document.getElementById('editorLanguage').value;

                console.log('▶️ Running code:', { language, length: code.length });

                if (!code.trim()) {
                    this.updateCodeOutput('❌ No code to execute', 'error');
                    return;
                }

                this.updateCodeOutput('🔄 Executing code...', 'info');

                // Send to backend for execution
                this.socket.emit('execute_code', {
                    code: code,
                    language: language
                });
            }

            requestAutoFill() {
                const editor = document.getElementById('codeEditor');
                const code = editor.value;
                const cursorPos = editor.selectionStart;

                console.log('🪄 Requesting AI assistance for code');

                // Get context around cursor
                const lines = code.split('\n');
                let currentLine = 0;
                let charCount = 0;

                for (let i = 0; i < lines.length; i++) {
                    if (charCount + lines[i].length >= cursorPos) {
                        currentLine = i;
                        break;
                    }
                    charCount += lines[i].length + 1; // +1 for newline
                }

                const context = lines.slice(Math.max(0, currentLine - 2), currentLine + 3).join('\n');

                this.socket.emit('request_code_assistance', {
                    code: code,
                    context: context,
                    cursor_position: cursorPos,
                    language: document.getElementById('editorLanguage').value
                });

                this.updateCodeOutput('🧠 Lyrixa analyzing code context...', 'info');
            }

            updateCodeOutput(message, type = 'info') {
                const output = document.getElementById('codeOutput');
                const timestamp = new Date().toLocaleTimeString();

                const colorMap = {
                    'info': '#4A9EFF',
                    'success': '#00ff88',
                    'error': '#ff4757',
                    'warning': '#ffa502'
                };

                const color = colorMap[type] || '#999';

                const newLine = document.createElement('div');
                newLine.style.cssText = `color: ${color}; margin-bottom: 4px;`;
                newLine.innerHTML = `<span style="color: #666;">[${timestamp}]</span> ${message}`;

                output.appendChild(newLine);
                output.scrollTop = output.scrollHeight;
            }

            // Aetherra Hub Methods
            initializeAetherraHub() {
                console.log('🌐 Initializing Aetherra Hub');
                this.checkHubConnection();
            }

            checkHubConnection() {
                const statusElement = document.getElementById('hubStatus');
                const indicatorElement = document.getElementById('hubStatusIndicator');
                const lastCheckElement = document.getElementById('hubLastCheck');

                statusElement.textContent = 'Checking...';
                indicatorElement.style.background = '#ffa502';

                // Send hub connection check to backend
                this.socket.emit('check_hub_connection');

                lastCheckElement.textContent = new Date().toLocaleTimeString();
            }

            connectHub() {
                console.log('🔗 Connecting to Aetherra Hub');
                this.socket.emit('connect_hub');
                this.updateHubStatus('Connecting...', 'connecting');
            }

            refreshHub() {
                console.log('🔄 Refreshing hub data');
                this.checkHubConnection();
                this.socket.emit('refresh_hub_data');
            }

            browseMarketplace() {
                console.log('🛒 Opening plugin marketplace');
                const hubContent = document.getElementById('hubContent');
                hubContent.innerHTML = `
                    <div style="padding: 20px;">
                        <h4 style="color: var(--neural-green); margin-bottom: 15px;">🛒 Plugin Marketplace</h4>
                        <div style="color: #999; text-align: center; padding: 40px;">
                            <i class="fas fa-store" style="font-size: 48px; margin-bottom: 20px; opacity: 0.5;"></i>
                            <div>Plugin Marketplace</div>
                            <div style="font-size: 12px; margin-top: 10px;">Browse and install community plugins</div>
                        </div>
                    </div>
                `;
            }

            updateHubStatus(status, type = 'offline') {
                const statusElement = document.getElementById('hubStatus');
                const indicatorElement = document.getElementById('hubStatusIndicator');

                statusElement.textContent = status;

                const colorMap = {
                    'online': '#00ff88',
                    'offline': '#666',
                    'connecting': '#ffa502',
                    'error': '#ff4757'
                };

                indicatorElement.style.background = colorMap[type] || '#666';
            }

            updatePluginsList(plugins, error = null) {
                try {
                    const pluginList = document.getElementById('pluginList');
                    if (!pluginList) {
                        console.warn('Plugin list element not found');
                        return;
                    }

                    if (error) {
                        pluginList.innerHTML = `
                            <div style="color: #ff4757; text-align: center; padding: 40px;">
                                <i class="fas fa-exclamation-triangle" style="font-size: 24px; margin-bottom: 10px;"></i>
                                <div>${error}</div>
                            </div>
                        `;
                        return;
                    }

                    if (!plugins || plugins.length === 0) {
                        pluginList.innerHTML = `
                            <div style="color: #999; text-align: center; padding: 40px;">
                                <i class="fas fa-puzzle-piece" style="font-size: 24px; margin-bottom: 10px; opacity: 0.5;"></i>
                                <div>No plugins found</div>
                            </div>
                        `;
                        return;
                    }

                    const pluginItems = plugins.map(plugin => {
                        const statusColor = {
                            'loaded': '#00ff88',
                            'available': '#4A9EFF',
                            'error': '#ff4757'
                        }[plugin.status] || '#666';

                        const typeIcon = {
                            'core': 'fas fa-cog',
                            'community': 'fas fa-users',
                            'ethics': 'fas fa-shield-alt'
                        }[plugin.type] || 'fas fa-puzzle-piece';

                        return `
                            <div style="background: var(--bg-darker); margin-bottom: 10px; padding: 15px; border-radius: 8px; border-left: 4px solid ${statusColor};">
                                <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 10px;">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <i class="${typeIcon}" style="color: ${statusColor};"></i>
                                        <span style="font-weight: bold; color: var(--text-primary);">${plugin.name}</span>
                                        <span style="background: ${statusColor}; color: #000; padding: 2px 8px; border-radius: 12px; font-size: 11px; font-weight: bold;">${plugin.status.toUpperCase()}</span>
                                    </div>
                                    <span style="color: #666; font-size: 12px;">v${plugin.version}</span>
                                </div>
                                <div style="color: #999; font-size: 12px; margin-bottom: 8px;">${plugin.description}</div>
                                ${plugin.capabilities && plugin.capabilities.length > 0 ? `
                                    <div style="display: flex; gap: 5px; flex-wrap: wrap;">
                                        ${plugin.capabilities.map(cap => `<span style="background: #333; color: #999; padding: 2px 6px; border-radius: 4px; font-size: 10px;">${cap}</span>`).join('')}
                                    </div>
                                ` : ''}
                            </div>
                        `;
                    }).join('');

                    if (pluginList && typeof pluginList.innerHTML !== 'undefined') {
                        pluginList.innerHTML = pluginItems;
                    }
                } catch (error) {
                    console.error('Error in updatePluginsList:', error);
                }
            }

            updateHubConnectionStatus(data) {
                try {
                    this.updateHubStatus(data.status, data.connected ? 'online' : 'offline');

                    // Update analytics
                    if (data.connected) {
                        const hubNodes = document.getElementById('hubNodes');
                        const hubPlugins = document.getElementById('hubPlugins');
                        const hubHealth = document.getElementById('hubHealth');

                        if (hubNodes) hubNodes.textContent = data.nodes || '--';
                        if (hubPlugins) hubPlugins.textContent = data.plugins || '--';
                        if (hubHealth) hubHealth.textContent = data.health ? `${data.health}%` : '--';
                    }
                } catch (error) {
                    console.error('Error in updateHubConnectionStatus:', error);
                }
            }

            updateHubAnalytics(data) {
                document.getElementById('hubNodes').textContent = data.nodes || '--';
                document.getElementById('hubPlugins').textContent = data.plugins || '--';
                document.getElementById('hubHealth').textContent = data.health ? `${data.health}%` : '--';

                if (data.recent_activity) {
                    const hubContent = document.getElementById('hubContent');
                    const activityHtml = data.recent_activity.map(activity =>
                        `<div style="padding: 8px; border-bottom: 1px solid #333; color: #999; font-size: 12px;">
                            <span style="color: var(--neural-green);">${activity.time}</span> - ${activity.event}
                        </div>`
                    ).join('');

                    hubContent.innerHTML = `
                        <div style="padding: 20px;">
                            <h4 style="color: var(--neural-green); margin-bottom: 15px;">Recent Activity</h4>
                            ${activityHtml}
                        </div>
                    `;
                }
            }

            // Self Metrics Methods
            initializeSelfMetrics() {
                console.log('📊 Initializing Self Metrics');
                this.requestSelfMetrics();
            }

            requestSelfMetrics() {
                console.log('📋 Requesting self metrics data');
                this.socket.emit('get_self_metrics');
            }

            displaySelfMetricsError(data) {
                console.log('⚠️ Self metrics error received:', data);
                // Display fallback metrics when real data fails
                const fallbackData = {
                    memory_continuity: {
                        overall_score: '--',
                        coherence_index: '--',
                        retention_rate: '--'
                    },
                    growth_trajectory: {
                        learning_rate: '--',
                        adaptation_score: '--'
                    },
                    conflict_analysis: {
                        active_conflicts: '--',
                        resolution_rate: '--'
                    },
                    ethics_integrity: {
                        ethics_score: '--',
                        narrative_integrity: '--',
                        consistency_index: '--'
                    },
                    data_source: 'fallback_error',
                    error_message: data.error || 'Unknown error'
                };
                this.updateSelfMetrics(fallbackData);
            }

            // LyrixaCore Unified Cognitive Stack Methods

            requestLyrixaCoreStatus() {
                try {
                    console.log('🧠 Requesting LyrixaCore status...');
                    this.socket.emit('get_lyrixa_core_status');
                } catch (error) {
                    console.error('Error requesting LyrixaCore status:', error);
                    this.handleLyrixaCoreError({ error: error.message });
                }
            }

            updateLyrixaCoreStatus(data) {
                try {
                    console.log('🧠 Updating LyrixaCore status:', data);

                    if (data.bridge_initialized) {
                        // Update main status display
                        const statusDiv = document.getElementById('lyrixaCoreStatus');
                        if (statusDiv) {
                            statusDiv.innerHTML = `
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                    <div style="background: var(--bg-dark); padding: 10px; border-radius: 6px; border-left: 3px solid var(--neural-green);">
                                        <div style="color: var(--neural-green); font-weight: bold; font-size: 12px;">BRIDGE STATUS</div>
                                        <div style="color: var(--text-primary); font-size: 14px;">✅ Initialized</div>
                                    </div>
                                    <div style="background: var(--bg-dark); padding: 10px; border-radius: 6px; border-left: 3px solid var(--neural-blue);">
                                        <div style="color: var(--neural-blue); font-weight: bold; font-size: 12px;">LAST UPDATE</div>
                                        <div style="color: var(--text-primary); font-size: 14px;">${new Date(data.last_update * 1000).toLocaleTimeString()}</div>
                                    </div>
                                </div>
                            `;
                        }

                        // Update coherence metrics
                        const identityCoherence = document.getElementById('identityCoherence');
                        const systemHealth = document.getElementById('systemHealth');
                        const integrationScore = document.getElementById('integrationScore');

                        if (identityCoherence) {
                            identityCoherence.textContent = (data.identity_coherence * 100).toFixed(1) + '%';
                        }
                        if (systemHealth) {
                            systemHealth.textContent = (data.system_health * 100).toFixed(1) + '%';
                        }
                        if (integrationScore) {
                            integrationScore.textContent = (data.integration_score * 100).toFixed(1) + '%';
                        }

                        // Update subsystems status
                        this.updateCognitiveSubsystems(data.active_subsystems);

                        // Update coherence factors
                        this.updateCoherenceFactors(data.coherence_factors);

                        // Update recommendations
                        this.updateSystemRecommendations(data.recommendations);

                    } else {
                        // Bridge not initialized
                        const statusDiv = document.getElementById('lyrixaCoreStatus');
                        if (statusDiv) {
                            statusDiv.innerHTML = `
                                <div style="text-align: center; color: #f39c12; padding: 20px;">
                                    <i class="fas fa-exclamation-triangle" style="font-size: 24px; margin-bottom: 10px;"></i>
                                    <div style="font-weight: bold;">LyrixaCore Bridge Not Initialized</div>
                                    <div style="font-size: 12px; margin-top: 5px;">${data.message || 'Unified cognitive stack not available'}</div>
                                </div>
                            `;
                        }
                    }

                } catch (error) {
                    console.error('Error updating LyrixaCore status:', error);
                    this.handleLyrixaCoreError({ error: error.message });
                }
            }

            updateCognitiveSubsystems(subsystems) {
                try {
                    const container = document.getElementById('cognitiveSubsystems');
                    if (!container) return;

                    const subsystemsList = Object.entries(subsystems).map(([name, active]) => {
                        const statusColor = active ? 'var(--neural-green)' : '#666';
                        const statusIcon = active ? 'fas fa-check-circle' : 'fas fa-times-circle';
                        const statusText = active ? 'Active' : 'Inactive';

                        return `
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #333;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <i class="${statusIcon}" style="color: ${statusColor}; font-size: 14px;"></i>
                                    <span style="color: var(--text-primary); font-weight: bold; text-transform: capitalize;">${name}</span>
                                </div>
                                <span style="color: ${statusColor}; font-size: 12px; font-weight: bold;">${statusText}</span>
                            </div>
                        `;
                    }).join('');

                    container.innerHTML = subsystemsList || '<div style="text-align: center; color: #666; padding: 20px;">No subsystem data available</div>';

                } catch (error) {
                    console.error('Error updating cognitive subsystems:', error);
                }
            }

            updateCoherenceFactors(factors) {
                try {
                    const container = document.getElementById('coherenceFactors');
                    if (!container) return;

                    if (factors && Object.keys(factors).length > 0) {
                        const factorsList = Object.entries(factors).map(([factor, value]) => {
                            const percentage = typeof value === 'number' ? (value * 100).toFixed(1) : value;
                            const color = typeof value === 'number'
                                ? (value > 0.8 ? 'var(--neural-green)' : value > 0.6 ? '#f39c12' : '#e74c3c')
                                : 'var(--text-primary)';

                            return `
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #333;">
                                    <span style="color: var(--text-primary); text-transform: capitalize;">${factor.replace(/_/g, ' ')}</span>
                                    <span style="color: ${color}; font-weight: bold;">${percentage}${typeof value === 'number' ? '%' : ''}</span>
                                </div>
                            `;
                        }).join('');

                        container.innerHTML = factorsList;
                    } else {
                        container.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">No coherence data available</div>';
                    }

                } catch (error) {
                    console.error('Error updating coherence factors:', error);
                }
            }

            updateSystemRecommendations(recommendations) {
                try {
                    const container = document.getElementById('systemRecommendations');
                    if (!container) return;

                    if (recommendations && recommendations.length > 0) {
                        const recommendationsList = recommendations.map(rec => `
                            <div style="background: var(--bg-dark); padding: 10px; border-radius: 6px; border-left: 3px solid var(--accent-blue); margin-bottom: 10px;">
                                <div style="color: var(--accent-blue); font-weight: bold; font-size: 12px; margin-bottom: 5px;">RECOMMENDATION</div>
                                <div style="color: var(--text-primary); font-size: 14px;">${rec}</div>
                            </div>
                        `).join('');

                        container.innerHTML = recommendationsList;
                    } else {
                        container.innerHTML = `
                            <div style="text-align: center; color: var(--neural-green); padding: 20px;">
                                <i class="fas fa-check-circle" style="font-size: 24px; margin-bottom: 10px;"></i>
                                <div>No recommendations - System operating optimally</div>
                            </div>
                        `;
                    }

                } catch (error) {
                    console.error('Error updating recommendations:', error);
                }
            }

            handleLyrixaCoreError(data) {
                try {
                    console.error('LyrixaCore error:', data);

                    // Update status with error
                    const statusDiv = document.getElementById('lyrixaCoreStatus');
                    if (statusDiv) {
                        statusDiv.innerHTML = `
                            <div style="text-align: center; color: #e74c3c; padding: 20px;">
                                <i class="fas fa-exclamation-circle" style="font-size: 24px; margin-bottom: 10px;"></i>
                                <div style="font-weight: bold;">Error Loading LyrixaCore Status</div>
                                <div style="font-size: 12px; margin-top: 5px;">${data.error || 'Unknown error occurred'}</div>
                            </div>
                        `;
                    }

                    // Reset all displays to error state
                    const identityCoherence = document.getElementById('identityCoherence');
                    const systemHealth = document.getElementById('systemHealth');
                    const integrationScore = document.getElementById('integrationScore');

                    if (identityCoherence) identityCoherence.textContent = 'ERR';
                    if (systemHealth) systemHealth.textContent = 'ERR';
                    if (integrationScore) integrationScore.textContent = 'ERR';

                } catch (error) {
                    console.error('Error in handleLyrixaCoreError:', error);
                }
            }
        }

        // Global functions for button onclick handlers
        function refreshLyrixaCoreStatus() {
            if (window.aetherraInterface) {
                window.aetherraInterface.requestLyrixaCoreStatus();
            } else {
                console.error('Aetherra interface not initialized');
            }
        }

        // Initialize interface when page loads
        document.addEventListener('DOMContentLoaded', () => {
            window.aetherraInterface = new AetherraInterface();
        });
    </script>
</body>

</html>
